<!DOCTYPE html>
<html>
	<head>
        <title>Networkmaps Installation</title>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="documentation.css">
        <!-- Global site tag (gtag.js) - Google Analytics -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=UA-22282732-2"></script>
        <script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
            gtag('config', 'UA-22282732-2');
        </script>
    </head>
	<body>
		<div class="content">
			<div class="head2">
                <a href="index.html" class="head_button">Home</a>
                <a href="documentation.html" class="head_button">Index</a>
			</div>
			<div class="head">
                Installation.
            </div>
			<div class="document">
                <div class="paragraph_intro red">
                    For administrators who deployed Networkmaps before June 2019, on newer releases Networkmaps does not use the mysql database anymore to store user information. From now on, the user information will be stored in memory with periodic file exports.<br>
                    To migrate from the database to a user file, you can use this script on the repository: <i>docs/db2usermigration.js</i><br>
                    This script will generate the user file that you can then reference on the configuration file.<br>
                </div>

                <div class="doc_head">Basic Instalation for Ubuntu (and other Linux distros).</div>
				<div class="paragraph">
                    <ol>
                        <li>Install Node.js. Version 10.15.1 or higher. Check this link for instructions: <a href="https://github.com/nodesource/distributions/blob/master/README.md#debinstall">https://github.com/nodesource/distributions/blob/master/README.md#debinstall</a></li>
                        <li>Clone the repository.<div><i>git clone https://github.com/pablomarle/networkmaps.git</i></div></li>
                        <li>Create the configuration file. The configuration file uses JSON format. The most basic configuration file would look like this:
                            <i><pre>{
    "socket": {
        "address": "&lt;ip&gt;",
        "port": &lt;port&gt;
    },
    "sendmail": {
        "server": "&lt;smtp_server&gt;",
        "port": &lt;smtp_port&gt;,
        "is_secured": &lt;smtp_is_secured&gt;,
        "user": "&lt;smtp_user&gt;",
        "password": "&lt;smtp_password&gt;",
        "from": "&lt;email_from&gt;"
    }
},</pre></i>
                            <ul>
                                <li>&lt;address&gt;: string containing the ip address where the server will be listening. By default will be localhost.</li>
                                <li>&lt;port&gt;: port number where the server will be listening. By default will be 3000.</li>
                                <li>&lt;smtp_server&gt;: smtp server used to send emails to users.</li>
                                <li>&lt;smtp_port&gt;: smtp port where the smtp server is listening.</li>
                                <li>&lt;smtp_is_secured&gt;: true or false depending on whether we use a secured smtp connection (TLS) or not.</li>
                                <li>&lt;smtp_user&gt;: username to authenticate to smtp server.</li>
                                <li>&lt;smtp_password&gt;: 
                                <li>&lt;email_from&gt;: email address we will be sending emails from.</li>
                            </ul>
                            Networkmaps expects the configuration file to be in: <i>/etc/networkmaps/config.json</i>
                        </li>
                        <li>Create the directories where the user file, diagrams and emails will be stored and make sure you have permissions to read and write on them. If not changed on the configuration file, these will default to:
                            <ul>
                                <li>User files: <i>/var/lib/networkmaps/users</i></li>
                                <li>Diagrams: <i>/var/lib/networkmaps/diagrams</i></li>
                                <li>Email queue: <i>/var/lib/networkmaps/sendmail/queue</i></li>
                                <li>Emails sent: <i>/var/lib/networkmaps/sendmail/sent</i></li>
                            </ul>
                        </li>
                        <li>Run the server. From the Networkmaps directory, run <i>./server.js</i></li>
                        <li>Run the email server. From the Networkmaps directory, run <i>./smtp_daemon.js</i></li>
                        <li>That is all. If you have any question, send me an email: pablo@masshandra.com.</li>
                    </ol>
				</div>
                <div class="doc_head">Installation other OS (windows, mac).</div>
                <div class="paragraph">Although we haven't tested these options, it should be possible to run Networkmaps on windows or mac.</div>
                <div class="doc_head">Running with HTTPS.</div>
                <div class="paragraph">TODO</div>
                <div class="doc_head">Running static content on a separated http server.</div>
                <div class="paragraph">TODO</div>
                <div class="doc_head">Recomendations.</div>
                <div class="paragraph">TODO</div>
			</div>
		</div>

        <script>

        </script>
	</body>
</html>

